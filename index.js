/*jshint esversion:6*/const express=require("express");const accepts=require('accepts');const bodyParser=require("body-parser");const _=require("lodash");const path=require('path');const ejs=require('ejs');/*const date=require(__dirname + "/date.js");*/const app=express();require("dotenv").config();app.set('view engine', 'ejs');app.use(bodyParser.urlencoded({extended: true}));app.use(express.static("public"));app.use(express.static(path.join(__dirname, 'public')));app.get('/', function (req, res){const accept=accepts(req); const userLang=accept.language(['en', 'es', 'ca', 'nl', 'pt']); switch (userLang){case 'en': res.render('index',{isPlural: false, params: []}); break; case 'ca': res.render('index',{isPlural: false, params: []}); break; case 'nl': res.render('index',{isPlural: false, params: []}); break; case 'pt': res.render('index',{isPlural: false, params: []}); break; default: res.render('index',{isPlural: false, params: []});}});app.get('/:params/:plural/:family', function (req, res){const params=req.params.params.split('/'); const isPlural=req.params.plural==='p'; const isFamily=req.params.family==='f'; const abuela=(req.params.params.includes('Chema')) || (req.params.plural==='f'); const accept=accepts(req); const userLang=accept.language(['en', 'es', 'ca', 'nl', 'pt']); switch (userLang){case 'en': res.render('index_en',{params, isPlural, isFamily, abuela}); break; case 'ca': res.render('index_ca',{params, isPlural, isFamily, abuela}); break; case 'nl': res.render('index_nl',{params, isPlural, isFamily, abuela}); break; case 'pt': res.render('index_pt',{params, isPlural, isFamily, abuela}); break; default: res.render('index',{params, isPlural, isFamily, abuela});}}); let PORT=process.env.PORT;if (PORT==null || PORT==""){PORT=3001;}app.listen(PORT, function (){console.log(`Server started on PORT ${PORT}...`);});